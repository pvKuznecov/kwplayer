(function(){"use strict";var e={7436:function(e,t,l){var i=l(5130),a=l(6768);function r(e,t,l,i,r,n){const o=(0,a.g2)("MainView");return(0,a.uX)(),(0,a.Wv)(o)}const n={id:"V_main"};function o(e,t){const l=(0,a.g2)("MusicPlaylist");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(l)])}var c=l(4232);const s={class:"playlist"},u={class:"controlpanel"},d={class:"f_cover"},h={class:"f_panel"},m={class:"track_name"},k={class:"track_time"},v={class:"track_timeline"},p=["src","volume"],f={class:"track_buttons"},w={xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",class:"bi bi-arrow-clockwise",viewBox:"0 0 16 16",style:{opacity:".5"}},g={class:"track_volume_elem"},L={class:"track_buttons_elem"},y={class:"playlist_arr"};function _(e,t){const l=(0,a.g2)("MusicUploader"),i=(0,a.g2)("MusicPlayer");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("div",u,[(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"svg_cover",width:"99",height:"99",fill:"currentColor",class:(0,c.C4)(["bi bi-disc-fill",e.Play?"rotating_rect":""]),viewBox:"0 0 16 16"},[...t[9]||(t[9]=[(0,a.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-6 0a2 2 0 1 0-4 0 2 2 0 0 0 4 0zM4 8a4 4 0 0 1 4-4 .5.5 0 0 0 0-1 5 5 0 0 0-5 5 .5.5 0 0 0 1 0zm9 0a.5.5 0 1 0-1 0 4 4 0 0 1-4 4 .5.5 0 0 0 0 1 5 5 0 0 0 5-5z"},null,-1)])],2))]),(0,a.Lk)("div",h,[(0,a.Lk)("div",m,(0,c.v_)(e.TargetTrack.name),1),(0,a.Lk)("div",k,[(0,a.Lk)("i",null,(0,c.v_)(e.TrackTime&&0!==e.TrackTime.current?e.ShowerTime(e.TrackTime.current):"00:00"),1),t[10]||(t[10]=(0,a.eW)(" / ",-1)),(0,a.Lk)("i",null,(0,c.v_)(e.TrackTime&&0!==e.TrackTime.duration?e.ShowerTime(e.TrackTime.duration):"00:00"),1)]),(0,a.Lk)("div",v,[(0,a.Lk)("audio",{id:"main_audio",controls:"",src:e.TargetTrack.url,style:{display:"none"},volume:e.VolumeLvl,onTimeupdate:t[0]||(t[0]=(...t)=>e.onTimeUpdate&&e.onTimeUpdate(...t))},null,40,p),(0,a.Lk)("input",{id:"main_tracktime",class:"track_rangetime",type:"range",min:"0",value:"0",onChange:t[1]||(t[1]=t=>e.Chng_TrackRangeTime())},null,32)]),(0,a.Lk)("div",f,[t[16]||(t[16]=(0,a.Lk)("div",{class:"track_buttons_elem"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-skip-backward-fill",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M.5 3.5A.5.5 0 0 0 0 4v8a.5.5 0 0 0 1 0V8.753l6.267 3.636c.54.313 1.233-.066 1.233-.697v-2.94l6.267 3.636c.54.314 1.233-.065 1.233-.696V4.308c0-.63-.693-1.01-1.233-.696L8.5 7.248v-2.94c0-.63-.692-1.01-1.233-.696L1 7.248V4a.5.5 0 0 0-.5-.5z"})])],-1)),(0,a.Lk)("div",{class:"track_buttons_elem",onClick:t[2]||(t[2]=t=>e.PlayerAction_Pause())},[...t[11]||(t[11]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-stop-fill",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"})],-1)])]),(0,a.Lk)("div",{class:"track_buttons_elem",onClick:t[3]||(t[3]=t=>e.PlayerAction_Play())},[...t[12]||(t[12]=[(0,a.Lk)("svg",{xmlns:"../../",width:"30",height:"30",fill:"currentColor",class:"bi bi-play-fill",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"})],-1)])]),t[17]||(t[17]=(0,a.Lk)("div",{class:"track_buttons_elem"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-skip-forward-fill",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V8.753l-6.267 3.636c-.54.313-1.233-.066-1.233-.697v-2.94l-6.267 3.636C.693 12.703 0 12.324 0 11.693V4.308c0-.63.693-1.01 1.233-.696L7.5 7.248v-2.94c0-.63.693-1.01 1.233-.696L15 7.248V4a.5.5 0 0 1 .5-.5z"})])],-1)),"one"==e.RepeatMode?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"track_buttons_elem",onClick:t[4]||(t[4]=t=>e.Chng_RepeatMode()),title:"Режим повтора: один трек"},[...t[13]||(t[13]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",class:"bi bi-arrow-clockwise",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),(0,a.Lk)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})],-1)])])):"all"==e.RepeatMode?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"track_buttons_elem",onClick:t[5]||(t[5]=t=>e.Chng_RepeatMode()),title:"Режим повтора: плейлист"},[...t[14]||(t[14]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",class:"bi bi-arrow-repeat",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})],-1)])])):((0,a.uX)(),(0,a.CE)("div",{key:2,class:"track_buttons_elem",onClick:t[6]||(t[6]=t=>e.Chng_RepeatMode()),title:"Режим повтора: выключен"},[((0,a.uX)(),(0,a.CE)("svg",w,[...t[15]||(t[15]=[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"},null,-1),(0,a.Lk)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"},null,-1)])]))]))]),(0,a.Lk)("div",g,[(0,a.Lk)("div",{class:"track_buttons_elem",onClick:t[7]||(t[7]=t=>e.PlayerAction_VolMinus())},[...t[18]||(t[18]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-dash-circle",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,a.Lk)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1)])]),(0,a.Lk)("div",L,"VOL: "+(0,c.v_)(100*e.VolumeLvl)+"%",1),(0,a.Lk)("div",{class:"track_buttons_elem",onClick:t[8]||(t[8]=t=>e.PlayerAction_VolPlus())},[...t[19]||(t[19]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-plus-circle",viewBox:"0 0 16 16"},[(0,a.Lk)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,a.Lk)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1)])])])])]),(0,a.Lk)("div",y,[(0,a.bF)(l,{onFilesSelected:e.onFilesSelected},null,8,["onFilesSelected"]),(0,a.bF)(i,{tracks:e.FindTracks,onSelectedTrack:e.onSelectedTrack},null,8,["tracks","onSelectedTrack"])])])}l(8111),l(2489);const T={for:"file-input",style:{"font-size":"small"},class:"custom-file-upload"};function b(e,t){return(0,a.uX)(),(0,a.CE)("label",T,[t[1]||(t[1]=(0,a.eW)(" Указать папку + ",-1)),(0,a.Lk)("input",{id:"file-input",type:"file",webkitdirectory:"",directory:"",multiple:"",onChange:t[0]||(t[0]=(...t)=>e.handleFileSelect&&e.handleFileSelect(...t))},null,32)])}l(4114);var M={name:"MusicUploader",data(){return{PlayList:!1}},methods:{handleFileSelect(e){const t=e.target.files;let l=[];for(let i of t)this.isAudio(i)?l.push(i):console.log(`Файл ${i.name} не является аудиофайлом.`);l.length>0?(this.$emit("files-selected",l),this.PlayList=!0):alert("Не было выбрано ни одного аудиофайла.")},isAudio(e){return new RegExp("^audio/","i").test(e.type)}}},C=l(1241);const A=(0,C.A)(M,[["render",b]]);var V=A;const P={class:"music_player"},x=["onClick"],S={style:{"text-align":"right"}};function z(e,t){return(0,a.uX)(),(0,a.CE)("div",P,[(0,a.Lk)("table",null,[(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.preparedTracks,(t,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id,class:(0,c.C4)({active:t.id==this.currentTrack.id}),onClick:l=>e.SelectedTrack(t)},[(0,a.Lk)("td",null,(0,c.v_)(l+1),1),(0,a.Lk)("td",S,(0,c.v_)(t.name),1)],10,x))),128))])])])}l(1701),l(4603),l(7566),l(8721);var F={name:"MusicPlayer",data(){return{currentTrack:!1}},props:["tracks"],computed:{preparedTracks(){return this.tracks.map(e=>({id:e.id||Math.random().toString(36).substr(2,9),name:e.name,url:URL.createObjectURL(e)}))}},methods:{SelectedTrack(e){this.currentTrack!==e&&(this.currentTrack=e,this.$emit("selected-track",e))}}};const R=(0,C.A)(F,[["render",z]]);var E=R,O={name:"MusicPlaylist",components:{MusicUploader:V,MusicPlayer:E},data(){return{Playlist:{name:"New playlist"},TargetTrack:!1,FindTracks:[],EditPlaylistMode:!1,VolumeLvl:.5,Play:!1,TrackTime:{current:0,duration:0},RepeatMode:""}},methods:{onFilesSelected(e){this.FindTracks=e.filter(e=>"audio/mpeg"===e.type)},onSelectedTrack(e){this.TargetTrack.id!==e.id&&(this.Play=!1,this.TargetTrack=e,setTimeout(()=>{let e=document.querySelector("#main_audio"),t=document.querySelector("#main_tracktime");if(e){let l=Math.trunc(e.duration);t.max=l,this.TrackTime={current:0,duration:Math.trunc(l/60)+":"+l%60}}},100))},PlayerAction_Play(){let e=document.querySelector("#main_audio");e.play(),this.Play=!0},PlayerAction_Pause(){let e=document.querySelector("#main_audio");e.pause(),this.Play=!1},PlayerAction_VolPlus(){let e=document.querySelector("#main_audio");this.VolumeLvl<1&&(this.VolumeLvl=parseFloat((this.VolumeLvl+.1).toFixed(1)),console.log("VolumeLvl",this.VolumeLvl)),e.volume=this.VolumeLvl},PlayerAction_VolMinus(){let e=document.querySelector("#main_audio");this.VolumeLvl>0&&(this.VolumeLvl=parseFloat((this.VolumeLvl-.1).toFixed(1)),console.log("VolumeLvl",this.VolumeLvl)),e.volume=this.VolumeLvl},Chng_RepeatMode(){let e=document.querySelector("#main_audio");switch(this.RepeatMode){case"":this.RepeatMode="one",e.loop=!0;break;case"one":this.RepeatMode="all",e.loop=!1;break;default:this.RepeatMode="",e.loop=!1;break}},Chng_TrackRangeTime(){let e=document.querySelector("#main_audio"),t=document.querySelector("#main_tracktime");e.currentTime=t.value},ShowerTime(e){if(e&&"number"==typeof e){let t=Math.trunc(e),l=Math.trunc(t/60)<10?"0"+Math.trunc(t/60):Math.trunc(t/60),i=t%60<10?"0"+t%60:t%60;return l+":"+i}return"00:00"},onTimeUpdate(e){const t=e.target;this.TrackTime.current=t.currentTime,this.TrackTime.duration=t.duration||0,this.TrackTime.current==this.TrackTime.duration&&this.PlayerAction_Pause();let l=document.querySelector("#main_tracktime");l.value=this.TrackTime.current}}};const X=(0,C.A)(O,[["render",_]]);var q=X,B={name:"MainView",components:{MusicPlaylist:q}};const U=(0,C.A)(B,[["render",o]]);var j=U,H={name:"App",components:{MainView:j}};const W=(0,C.A)(H,[["render",r]]);var $=W;(0,i.Ef)($).mount("#app")}},t={};function l(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,l),r.exports}l.m=e,function(){var e=[];l.O=function(t,i,a,r){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],r=e[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||n>=r)&&Object.keys(l.O).every(function(e){return l.O[e](i[c])})?i.splice(c--,1):(o=!1,r<n&&(n=r));if(o){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,a,r]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,n=i[0],o=i[1],c=i[2],s=0;if(n.some(function(t){return 0!==e[t]})){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);if(c)var u=c(l)}for(t&&t(i);s<n.length;s++)r=n[s],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(u)},i=self["webpackChunkkwplayer"]=self["webpackChunkkwplayer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=l.O(void 0,[504],function(){return l(7436)});i=l.O(i)})();
//# sourceMappingURL=app.f5d613ac.js.map