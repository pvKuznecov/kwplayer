<div class="playlist">
    <div class="controlpanel">
        <div class="f_cover">
            <svg xmlns="http://www.w3.org/2000/svg" id="svg_cover" width="99" height="99" fill="currentColor" class="bi bi-disc-fill" :class="(Play) ? 'rotating_rect' : ''" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-6 0a2 2 0 1 0-4 0 2 2 0 0 0 4 0zM4 8a4 4 0 0 1 4-4 .5.5 0 0 0 0-1 5 5 0 0 0-5 5 .5.5 0 0 0 1 0zm9 0a.5.5 0 1 0-1 0 4 4 0 0 1-4 4 .5.5 0 0 0 0 1 5 5 0 0 0 5-5z"/>
            </svg>
        </div>
        <div class="f_panel">
            <div class="track_name">{{TargetTrack.name}}</div>
            <div class="track_time">
                <i>{{(TrackTime && TrackTime.current !== 0) ? ShowerTime(TrackTime.current) : '00:00'}}</i> / <i>{{(TrackTime && TrackTime.duration !== 0) ? ShowerTime(TrackTime.duration) : '00:00'}}</i>
            </div>
            <div class="track_timeline">
                <!-- <audio id="main_audio" controls :src="TargetTrack.url" :volume="VolumeLvl" :currentTime="TrackTime.current" /> -->
                <!-- <audio id="main_audio" controls :src="TargetTrack.url" style="display: none;" :volume="VolumeLvl" :currentTime="TrackTime.current" @timeupdate="onTimeUpdate"  /> -->
                <audio id="main_audio" controls :src="TargetTrack.url" style="display: none;" :volume="VolumeLvl" @timeupdate="onTimeUpdate"  />
                <input id="main_tracktime" class="track_rangetime" type="range" min="0" value="0" @change="Chng_TrackRangeTime()" />
                <!-- <input id="main_tracktime" class="track_rangetime" type="range" min="0" :value="TrackTime.current" @change="Chng_TrackRangeTime()" /> -->
            </div>
            <div class="track_buttons">
                <div class="track_buttons_elem">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-skip-backward-fill" viewBox="0 0 16 16">
                        <path d="M.5 3.5A.5.5 0 0 0 0 4v8a.5.5 0 0 0 1 0V8.753l6.267 3.636c.54.313 1.233-.066 1.233-.697v-2.94l6.267 3.636c.54.314 1.233-.065 1.233-.696V4.308c0-.63-.693-1.01-1.233-.696L8.5 7.248v-2.94c0-.63-.692-1.01-1.233-.696L1 7.248V4a.5.5 0 0 0-.5-.5z"/>
                    </svg>
                </div>
                <div class="track_buttons_elem" @click="PlayerAction_Pause()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-stop-fill" viewBox="0 0 16 16">
                        <path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"/>
                    </svg>
                </div>
                <div class="track_buttons_elem" @click="PlayerAction_Play()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                    </svg>
                </div>
                <div class="track_buttons_elem">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-skip-forward-fill" viewBox="0 0 16 16">
                        <path d="M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V8.753l-6.267 3.636c-.54.313-1.233-.066-1.233-.697v-2.94l-6.267 3.636C.693 12.703 0 12.324 0 11.693V4.308c0-.63.693-1.01 1.233-.696L7.5 7.248v-2.94c0-.63.693-1.01 1.233-.696L15 7.248V4a.5.5 0 0 1 .5-.5z"/>
                    </svg>
                </div>
                <div v-if="RepeatMode == 'one'" class="track_buttons_elem" @click="Chng_RepeatMode()" title="Режим повтора: один трек">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                    </svg>
                </div>
                <div v-else-if="RepeatMode == 'all'" class="track_buttons_elem" @click="Chng_RepeatMode()" title="Режим повтора: плейлист">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                        <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
                        <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
                    </svg>
                </div>
                <div v-else class="track_buttons_elem" @click="Chng_RepeatMode()" title="Режим повтора: выключен">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16" style="opacity: .5;">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                    </svg>
                </div>
            </div>
            <div class="track_volume_elem">
                <div class="track_buttons_elem" @click="PlayerAction_VolMinus()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-dash-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>
                    </svg>
                </div>
                <div class="track_buttons_elem">VOL: {{VolumeLvl * 100}}%</div>
                <div class="track_buttons_elem" @click="PlayerAction_VolPlus()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                </div>                                
            </div>
        </div>
        <div class="f_trackinfo">
            <table v-if="TargetTrack && TargetTrack.common">
                <tbody>
                    <tr><td class="tagkey">{{TagsData.album}}:</td><td class="tagval">{{TargetTrack.common.album ?? ''}}</td></tr>
                    <tr><td class="tagkey">albumartist:</td><td class="tagval">{{TargetTrack.common.albumartist ?? ''}}</td></tr>
                    <tr><td class="tagkey">{{TagsData.artist}}:</td><td class="tagval">{{TargetTrack.common.artist ?? ''}}</td></tr>
                    <tr><td class="tagkey">artists:</td><td class="tagval">{{TargetTrack.common.artists ?? ''}}</td></tr>
                    <tr><td class="tagkey">date:</td><td class="tagval">{{TargetTrack.common.date ?? ''}}</td></tr>
                    <tr><td class="tagkey">disk:</td><td class="tagval">{{TargetTrack.common.disk ?? ''}}</td></tr>
                    <tr><td class="tagkey">{{TagsData.genre}}:</td><td class="tagval"><ul><li v-for="genreVal in TargetTrack.common.genre || []">{{genreVal}}</li></ul></td></tr>
                    <tr><td class="tagkey">{{TagsData.title}}:</td><td class="tagval">{{TargetTrack.common.title ?? ''}}</td></tr>
                    <tr><td class="tagkey">track:</td><td class="tagval">{{TargetTrack.common.track ?? ''}}</td></tr>
                    <tr><td class="tagkey">year:</td><td class="tagval">{{TargetTrack.common.year ?? ''}}</td></tr>
                </tbody>
            </table>
            
        </div>
    </div>
    
    <div class="playlist_arr">
        <div class="playlist_name">
            <div v-if="EditPlaylistMode"><input type="text" name="playlist_name" id="playlist_name"></div>
            <div v-else>[ {{Playlist.name}} ]</div>
        </div>
        <MusicUploader @files-selected="onFilesSelected" />
        <MusicPlayer :tracks="FindTracks" @selected-track="onSelectedTrack" />
    </div>    
</div>